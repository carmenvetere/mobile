title: Weather
theme: Bubble
path: weather-view
type: custom:grid-layout
cards:
  - type: custom:button-card
    styles:
      card:
        - border-radius: 0px
        - padding-bottom: 5px
        - padding-left: 0px
        - padding-top: 0px
        - margin-left: -4px
        - margin-top: -4px
        - width: 720px
        - height: 1280px
        - background: radial-gradient(circle,rgba(85, 89, 92, 1) 0%, rgba(0, 0, 0, 1) 85%);
      grid:
        - grid-template-areas: |
            "header"
            "main"
            "nav"
        - grid-template-columns: 720px
        - grid-template-rows: 100px 1050 100px
        - align-items: start
        - column-gap: 2px
        - row-gap: 15px
    custom_fields:
      header: !include header.yaml
      main:
        card:
          type: vertical-stack
          cards:
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.nws_alerts_alerts
                  above: 0
              card:
                type: custom:expander-card
                expanded: true
                title-card-clickable: true
                card_mod:
                  style: |
                    ha-card {
                      background: transparent !important;
                      }
                title-card:
                  type: custom:bubble-card
                  card_type: separator
                  name: Active Weather Alerts
                  icon: mdi:alert
                  rows: 0.75
                  styles: |
                    .bubble-name {
                    font-size: 28px !important;  /* title */
                    font-weight: bold !important;
                    }
                    .bubble-line {
                    background: var(--primary-text-color);
                    opacity: 0.1;
                    }
                    .card-content {
                    padding-top: 0px !important;
                    padding-left: 10px !important;
                    }  
                cards:
                  - type: markdown
                    content: |                    
                      {% set alerts = state_attr('sensor.nws_alerts_alerts', 'Alerts') %}
                      {% if alerts and alerts|length > 0 %}
                        {% for alert in alerts %}
                      ### {{ alert.Event }}
                      
                      **{{ alert.Headline }}**
                      
                      {{ alert.Description }}
                      
                      {% if alert.Instruction %}
                      **Instructions:**
                      {{ alert.Instruction }}
                      {% endif %}
                      
                      *Expires: {{ alert.Expires | as_timestamp | timestamp_custom('%B %d, %Y at %I:%M %p') }}*
                      
                      ---
                        {% endfor %}
                      {% else %}
                      âœ… **No active weather alerts**
                      {% endif %}
                    card_mod:
                      style: |
                        ha-card {
                          text-align: left !important;
                          background: transparent !important;
                        }
                        ha-markdown {
                          text-align: left !important;
                        }
                        ha-markdown p, 
                        ha-markdown h3, 
                        ha-markdown h2, 
                        ha-markdown h1 {
                          text-align: left !important;
                        }
            - type: custom:bubble-card
              card_type: separator
              name: Current Weather & 5-Day Forecast
              icon: mdi:weather-partly-cloudy
              rows: 0.75
              styles: |
                .bubble-name {
                font-size: 28px !important;  /* title */
                font-weight: bold !important;
                }
                .bubble-line {
                background: transparent !important;
                opacity: 0.1;
                }
                .card-content {
                padding-top: 20px !important;
                padding-left: 10px !important;
                }
            - type: weather-forecast
              show_current: true
              show_forecast: true
              name: ""
              entity: weather.bayberry
              forecast_type: daily
              forecast_slots: 5
              tap_action:
                action: none
              card_mod:
                style: |
                  ha-card {
                    background: transparent !important;
                    box-shadow: none !important;
                    font-size: 32px !important;
                  }
                    }
                  .name-state {
                    justify-content: flex-start !important;
                  }
                  .state {
                    text-align: left !important;
                  }
                  .temp-attribute .temp {
                    font-size: 40px !important;
                    }
                  .forecast .temp {
                    font-size: 32px !important;
                    }
                  .forecast .templow {
                    font-size: 32px !important;
                    }
                  .forecast div {
                    font-size: 32px !important;
                    }
            - type: custom:bubble-card
              card_type: separator
              name: Hourly Forecast
              icon: mdi:weather-partly-cloudy
              rows: 0.75
              styles: |
                .bubble-name {
                font-size: 28px !important;  /* title */
                font-weight: bold !important;
                }
                .bubble-line {
                background: var(--primary-text-color);
                opacity: 0.1;
                }
                .card-content {
                padding-top: 40px !important;
                padding-left: 10px !important;
                }
            - type: weather-forecast
              show_current: false
              show_forecast: true
              entity: weather.bayberry
              forecast_type: hourly
              forecast_slots: 5
              tap_action:
                action: none
              card_mod:
                style: |
                  ha-card {
                    background: transparent !important;
                    box-shadow: none !important;
                    font-size: 32px !important;
                  }
                    }
                  .name-state {
                    justify-content: flex-start !important;
                  }
                  .state {
                    text-align: left !important;
                  }
                  .temp-attribute .temp {
                    font-size: 40px !important;
                    }
                  .forecast .temp {
                    font-size: 32px !important;
                    }
                  .forecast .templow {
                    font-size: 32px !important;
                    }
                  .forecast div {
                    font-size: 32px !important;
                    }
            - type: custom:bubble-card
              card_type: separator
              name: Radar
              icon: mdi:radar
              rows: 0.75
              styles: |
                .bubble-name {
                font-size: 28px !important;  /* title */
                font-weight: bold !important;
                }
                .bubble-line {
                background: var(--primary-text-color);
                opacity: 0.1;
                }
                .card-content {
                padding-top: 40px !important;
                padding-left: 10px !important;
                }
            - type: custom:weather-radar-card
              data_source: RainViewer-TWC
              map_style: Dark
              zoom_level: 7
              show_recenter: false
              square_map: false
              extra_labels: false
              show_range: false
              show_marker: false
              show_playback: true
              show_zoom: true
              card_mod:
                style: |
                  ha-card {
                    max-height: 340px !important;
                  }
      nav: !include footer-menu.yaml