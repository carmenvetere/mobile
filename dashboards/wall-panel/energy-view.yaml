# lovelace_gen
title: Energy
theme: Wall Panel
path: energy-view
type: custom:grid-layout
cards:
  - type: custom:button-card
    styles:
      card:
        - border-radius: 0px
        - padding-bottom: 5px
        - padding-left: 0px
        - padding-top: 0px
        - margin-left: -4px
        - margin-top: -4px      
        - width: 720px
        - height: 1280px      
        - background: radial-gradient(circle,rgba(85, 89, 92, 1) 0%, rgba(0, 0, 0, 1) 85%);
      grid:
        - grid-template-areas: |
            "header"
            "main"
            "nav"
        - grid-template-columns: 720px
        - grid-template-rows: 100px 1050px 100px
        - align-items: start
        - column-gap: 2px
        - row-gap: 15px
    custom_fields:
      header: !include header.yaml
      main:
        card: 
          type: vertical-stack
          cards: 
            - type: custom:button-card
              visibility:
              - condition: state
                entity: binary_sensor.bayberry_grid_status
                state: 'off'
              styles:
                card:
                  - height: 140px
                  - width: 690px
                  - background: var(--background-color-2)
                  - border-radius: 30px
                  - padding-left: 10px
                  - padding-top: 0px
                grid:
                  - grid-template-areas: |
                      "icon name percent time"
                  - grid-template-columns: 100px 240px 100px 250px
                  - grid-template-rows: 140px
                  - column-gap: 0px
                  - row-gap: 0px
                  - align-items: center
              custom_fields:
                name:
                  card:
                    type: custom:button-card
                    name: Powerwall
                    show_name: true
                    show_state: false
                    show_icon: false
                    styles:
                      card:
                        - height: 140px
                        - width: 240px
                        - background-color: transparent
                        - margin-left: "-20px"
                      name:
                        - font-size: 36px
                        - font-weight: bold
                        - color: var(--text-color)
                        - text-align: left
                        - justify-self: start
                        - white-space: normal
                        - overflow: visible
                        - word-break: break-word
                icon:
                  card:
                    type: custom:button-card
                    icon: mdi:battery-50
                    styles:
                      icon:
                        - color: "#EF8C00"
                        - height: 60px
                        - width: 60px
                      card:
                        - background-color: transparent
                        - margin-left: 10px
                        - height: 65px
                        - width: 75px
                percent:
                  card:
                    type: custom:button-card
                    entity: sensor.bayberry_charge
                    show_state: true
                    show_label: false
                    show_name: false
                    show_icon: false
                    styles:
                      card:
                        - height: 140px
                        - width: 100px
                        - background: transparent
                      state:
                        - font-size: 46px
                        - font-weight: bold
                        - color: var(--text-color)
                time:
                  card:
                    type: custom:button-card
                    entity: sensor.powerwall_discharge_time
                    show_state: true
                    show_label: false
                    show_name: false
                    show_icon: false
                    state_display: |
                      [[[
                        const state = states['sensor.powerwall_discharge_time'].state;
                        return state.split(': ')[1];
                      ]]]
                    styles:
                      card:
                        - height: 140px
                        - width: 250px
                        - background: transparent
                      state:
                        - font-size: 46px
                        - font-weight: bold
                        - color: var(--text-color)
            - !include /config/dashboards/modules/power-flow-card-wall.yaml
            - type: custom:button-card
              styles:
                card:
                  - height: 140px
                  - width: 690px
                  - background: var(--background-color-2)
                  - border-radius: 30px
                  - padding-left: 20px
                  - padding-top: 0px
                  - margin-left: 15px
                grid:
                  - grid-template-areas: |
                      "icon name state"
                  - grid-template-columns: 100px 240px 350px
                  - grid-template-rows: 140px
                  - column-gap: 0px
                  - row-gap: 0px
                  - align-items: center
              custom_fields:
                name:
                  card:
                    type: custom:button-card
                    name: Today's Energy
                    show_name: true
                    show_state: false
                    show_icon: false
                    styles:
                      card:
                        - height: 140px
                        - width: 240px
                        - background-color: transparent
                        - margin-left: "-20px"
                      name:
                        - font-size: 36px
                        - font-weight: bold
                        - color: var(--text-color)
                        - text-align: left
                        - justify-self: start
                        - white-space: normal
                        - overflow: visible
                        - word-break: break-word
                icon:
                  card:
                    type: custom:button-card
                    icon: mdi:lightning-bolt
                    styles:
                      icon:
                        - color: var(--text-color)
                        - height: 60px
                        - width: 60px
                      card:
                        - background-color: transparent
                        - margin-left: 10px
                        - height: 65px
                        - width: 75px
                state:
                  card:
                    type: custom:button-card
                    entity: sensor.bayberry_home_usage
                    show_state: true
                    show_label: false
                    show_name: false
                    show_icon: false
                    styles:
                      card:
                        - height: 130px
                        - width: 350px
                        - background: transparent
                      state:
                        - font-size: 46px
                        - font-weight: bold
                        - color: var(--text-color)
            - type: custom:button-card
              tap_action:
                action: navigate
                navigation_path: '#powerwall-reserve'
              styles:
                card:
                  - height: 140px
                  - width: 690px
                  - background: var(--background-color-2)
                  - border-radius: 30px
                  - padding-left: 20px
                  - padding-top: 0px
                  - margin-left: 15px
                grid:
                  - grid-template-areas: |
                      "icon name state"
                  - grid-template-columns: 100px 350px 240px
                  - grid-template-rows: 140px
                  - column-gap: 0px
                  - row-gap: 0px
                  - align-items: center
              custom_fields:
                name:
                  card:
                    type: custom:button-card
                    name: Powerwall Reserve
                    show_name: true
                    show_state: false
                    show_icon: false
                    styles:
                      card:
                        - height: 140px
                        - width: 350px
                        - background-color: transparent
                        - margin-left: "-20px"
                      name:
                        - font-size: 36px
                        - font-weight: bold
                        - color: var(--text-color)
                        - text-align: left
                        - justify-self: start
                        - white-space: normal
                        - overflow: visible
                        - word-break: break-word
                icon:
                  card:
                    type: custom:button-card
                    icon: mdi:battery-50
                    styles:
                      icon:
                        - color: var(--text-color)
                        - height: 60px
                        - width: 60px
                      card:
                        - background-color: transparent
                        - margin-left: 10px
                        - height: 65px
                        - width: 75px
                state:
                  card:
                    type: custom:button-card
                    entity: number.bayberry_backup_reserve
                    tap_action:
                      action: navigate
                      navigation_path: '#powerwall-reserve'
                    show_state: true
                    show_label: false
                    show_name: false
                    show_icon: false
                    styles:
                      card:
                        - height: 130px
                        - width: 240px
                        - background: transparent
                      state:
                        - font-size: 46px
                        - font-weight: bold
                        - color: var(--text-color)
      nav: !include footer-menu.yaml
#Powerwall Reserve Pop-Up
  - type: vertical-stack
    cards:
      - type: custom:bubble-card
        card_type: pop-up
        hash: "#powerwall-reserve"
        button_type: name
        sub_button:
          main: []
          bottom: []
        name: Powerwall Backup Reserve
        icon: mdi:battery-50
        rows: 2
        scrolling_effect: false
        styles: |
          .bubble-name {
            font-size: 24px !important;
            line-height: 1.1;
            margin-bottom: 30px !important;
            }

          .bubble-button-card-container {
            border-radius: 30px !important;
            background-color: transparent !important;
            min-height: 100px !important;
            }

          .bubble-button-background {
            background-color: transparent !important;
            }
            
          .bubble-icon-container {
            background-color: transparent !important;
            margin-bottom: 30px !important;
            }
            
          .bubble-icon {
            --mdc-icon-size: 36px !important;
            }
        card_layout: large
      - type: custom:bubble-card
        card_type: button
        button_type: slider
        sub_button:
          main: []
          bottom:
            - entity: number.bayberry_backup_reserve
              show_state: true
              show_background: false
              force_icon: false
              scrolling_effect: false
              show_icon: false
        entity: number.bayberry_backup_reserve
        slider_fill_orientation: bottom
        styles: |
          .bubble-button-card-container {
            border-radius: 30px !important;
            background-color: var(--background-color) !important;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.06)
              !important;
            min-height: 500px !important;
            max-width: 100px !important;
            margin: 0 auto !important;
            }
          .bubble-sub-button { 
            font-size: 22px !important;
            font-weight: bold; 
            margin-top: 27px;
            color: var(--text-color) !important;
            }
          .bubble-range-fill {
            background: var(--accent-color) !important;
            }
          .bubble-range-slider {
          background: var(--background-color) !important;
          }
        scrolling_effect: false
        show_icon: false
        show_name: false
        invert_slider_value: false
