type: vertical-stack
cards: 
    - type: custom:button-card
      show_name: false
      show_icon: false
      show_state: false
      styles:
        card:
          - height: 175px
          - width: 690px
          - padding-top: 0px
          - margin-top: 0px
          - margin-left: 15px
          - border-radius: 20px
          - background-color: "#626569"
        grid:
          - grid-template-areas: |
              "title title title title"
              "space hallway media_room space2"
          - grid-template-columns: 5px 332px 332px 5px
          - grid-template-rows: 45px 125px 10px 
          - column-gap: 5px
          - align-items: center
      custom_fields:
        title:
          card:
            type: custom:button-card
            name: Active Rooms
            styles:
              card:
                - background: transparent
              name:
                - font-size: 26px
                - padding-bottom: 5px
                - font-weight: bold
        hallway:
          card:
            type: custom:button-card
            entity: switch.basement_thermostat_basement_priority
            show_state: false
            show_name: false
            show_icon: false
            tap_action:
              action: toggle
            styles:
              card:
                - height: 125px
                - width: 332px
                - border-radius: 20px
                - background-color: var(--background-color)
              name:
                - font-size: 28px
                - font-weight: bold
                - color: var(--primary-text-color)
              grid:
                - grid-template-areas: |
                    "name name"
                    "temp humidity"
                - grid-template-columns: 167px 165px
                - grid-template-rows: 65px 60px
                - column-gap: 5px
                - align-items: center
            state:
              - value: "on"
                styles:
                  card:
                    - background-color: var(--accent-color)
                    - opacity: 1
                  name:
                    - color: var(--primary-text-color)
                  icon:
                    - color: var(--primary-text-color)
              - value: "off"
                styles: 
                  card: 
                    - background-color: var(--ha-card-background)
                    - opacity: 1
                  name:
                    - color: var(--secondary-text-color)
                  icon:
                    - color: var(--secondary-text-color)                    
            custom_fields:
              name:
                card:
                  type: custom:button-card
                  name: Hallway
                  entity: switch.basement_thermostat_basement_priority
                  show_state: false
                  show_name: true
                  show_icon: false
                  tap_action:
                    action: toggle
                  styles:
                    card:
                      - height: 65px
                      - width: 332px
                      - border-radius: 20px
                      - background-color: transparent
                    name:
                      - font-size: 28px
                      - font-weight: bold
                      - color: var(--primary-text-color)
                  state:
                    - value: "on"
                      styles:
                        name:
                          - color: var(--secondary-text-color)
                        icon:
                          - color: var(--secondary-text-color)
              temp:
                card:
                  type: custom:button-card
                  entity: sensor.basement_thermostat_homekit_current_temperature
                  triggers_update:
                    - switch.basement_thermostat_basement_priority
                  show_state: true
                  show_name: false
                  show_icon: false
                  icon: mdi:thermometer
                  styles:
                    card:
                      - height: 65px
                      - width: 167px
                      - border-radius: 20px
                      - background-color: transparent
                      - padding-bottom: 35px
                      - margin-left: 20px
                    state:
                      - font-size: 28px
                      - font-weight: bold
                      - color: |
                          [[[
                            const priority = states['switch.basement_thermostat_basement_priority'];
                            if (priority && priority.state === 'on') {
                              return 'var(--secondary-text-color)';
                            }
                            return 'var(--primary-text-color)';
                          ]]]
              humidity:
                card:
                  type: custom:button-card
                  entity: sensor.basement_thermostat_homekit_current_humidity
                  triggers_update:
                    - switch.basement_thermostat_basement_priority
                  show_state: true
                  show_name: false
                  show_icon: false
                  styles:
                    card:
                      - height: 65px
                      - width: 165px
                      - border-radius: 20px
                      - background-color: transparent
                      - padding-bottom: 35px
                      - padding-right: 20px
                    state:
                      - font-size: 28px
                      - font-weight: bold
                      - color: |
                          [[[
                            const priority = states['switch.basement_thermostat_basement_priority'];
                            if (priority && priority.state === 'on') {
                              return 'var(--secondary-text-color)';
                            }
                            return 'var(--primary-text-color)';
                          ]]]
        media_room:
          card:
            type: custom:button-card
            entity: switch.basement_thermostat_family_room_priority
            show_state: false
            show_name: false
            show_icon: false
            tap_action:
              action: toggle
            styles:
              card:
                - height: 125px
                - width: 332px
                - border-radius: 20px
                - background-color: var(--background-color)
              name:
                - font-size: 28px
                - font-weight: bold
                - color: var(--primary-text-color)
              grid:
                - grid-template-areas: |
                    "name name"
                    "temp humidity"
                - grid-template-columns: 167px 165px
                - grid-template-rows: 65px 60px
                - column-gap: 5px
                - align-items: center
            state:
              - value: "on"
                styles:
                  card:
                    - background-color: var(--ha-card-background)
                    - opacity: 1
                  name:
                    - color: var(--secondary-text-color)
                  icon:
                    - color: var(--secondary-text-color)
            custom_fields:
              name:
                card:
                  type: custom:button-card
                  name: Media Room
                  entity: switch.basement_thermostat_family_room_priority
                  show_state: false
                  show_name: true
                  show_icon: false
                  tap_action:
                    action: toggle
                  styles:
                    card:
                      - height: 65px
                      - width: 332px
                      - border-radius: 20px
                      - background-color: transparent
                    name:
                      - font-size: 28px
                      - font-weight: bold
                      - color: var(--primary-text-color)
                  state:
                    - value: "on"
                      styles:
                        name:
                          - color: var(--secondary-text-color)
                        icon:
                          - color: var(--secondary-text-color)
              temp:
                card:
                  type: custom:button-card
                  entity: sensor.family_room_air_sensor_01_temperature_sensor
                  triggers_update:
                    - switch.basement_thermostat_family_room_priority
                  show_state: true
                  show_name: false
                  show_icon: false
                  icon: mdi:thermometer
                  styles:
                    card:
                      - height: 65px
                      - width: 167px
                      - border-radius: 20px
                      - background-color: transparent
                      - padding-bottom: 35px
                      - margin-left: 20px
                    state:
                      - font-size: 28px
                      - font-weight: bold
                      - color: |
                          [[[
                            const priority = states['switch.basement_thermostat_family_room_priority'];
                            if (priority && priority.state === 'on') {
                              return 'var(--secondary-text-color)';
                            }
                            return 'var(--primary-text-color)';
                          ]]]
              humidity:
                card:
                  type: custom:button-card
                  entity: sensor.family_room_air_sensor_01_humidity_sensor
                  triggers_update:
                    - switch.basement_thermostat_family_room_priority
                  show_state: true
                  show_name: false
                  show_icon: false
                  styles:
                    card:
                      - height: 65px
                      - width: 165px
                      - border-radius: 20px
                      - background-color: transparent
                      - padding-bottom: 35px
                      - padding-right: 20px
                    state:
                      - font-size: 28px
                      - font-weight: bold
                      - color: |
                          [[[
                            const priority = states['switch.basement_thermostat_family_room_priority'];
                            if (priority && priority.state === 'on') {
                              return 'var(--secondary-text-color)';
                            }
                            return 'var(--primary-text-color)';
                          ]]]
    - type: thermostat
      name: Basement
      entity: climate.basement_thermostat_homekit
      theme: Wall Panel
      show_current_as_primary: false
      card_mod:
        style:
          .: |
            ha-card {
              background: var(--background-color) !important;
              border-radius: 30px !important;
              max-width: 690px !important;
              margin-left: 15px !important;
            }
            .more-info {
              display: none !important;
            }

            .title {
              font-size: 24px !important;
              font-weight: bold !important;
              }
          round-slider$: |
            .slider {
              stroke: var(--background-color-2) !important;
            }
    - type: custom:button-card
      show_name: false
      show_icon: false
      show_state: false
      styles:
        card:
          - height: 125px
          - width: 690px
          - padding-top: 0px
          - margin-top: 0px
          - margin-left: 15px
          - border-radius: 20px
          - background-color: "#626569"
        grid:
          - grid-template-areas: |
              "off cool heat emergency_heat"
          - grid-template-columns: 171px 165px 165px 171px
          - grid-template-rows: 125px
          - column-gap: 6px
          - align-items: center
      custom_fields:
        "off":
          card:
            type: custom:button-card
            entity: climate.basement_thermostat
            show_state: false
            show_name: true
            show_icon: true
            name: "Off"
            icon: mdi:hvac-off
            tap_action:
              action: perform-action
              perform_action: climate.set_hvac_mode
              data:
                hvac_mode: "off"
              target:
                entity_id: climate.basement_thermostat
            styles:
              card:
                - height: 125px
                - width: 171px
                - border-radius: 20px
                - background-color: var(--background-color)
              icon:
                - width: 68px
                - height: 68px
                - color: var(--primary-text-color)
              name:
                - font-size: 28px
                - font-weight: bold
                - color: var(--primary-text-color)
            state:
              - value: "off"
                styles:
                  card:
                    - background-color: var(--ha-card-background)
                    - opacity: 1
                  name:
                    - color: var(--secondary-text-color)
                  icon:
                    - color: var(--secondary-text-color)
        cool:
          card:
            type: custom:button-card
            entity: climate.basement_thermostat
            show_state: false
            show_name: true
            show_icon: true
            name: Cool
            icon: mdi:snowflake
            tap_action:
              action: perform-action
              perform_action: climate.set_hvac_mode
              data:
                hvac_mode: cool
              target:
                entity_id: climate.basement_thermostat
            styles:
              card:
                - height: 125px
                - width: 165px
                - border-radius: 20px
                - background-color: var(--background-color)
              icon:
                - width: 68px
                - height: 68px
                - color: var(--primary-text-color)
              name:
                - font-size: 28px
                - font-weight: bold
                - color: var(--primary-text-color)
            state:
              - value: cool
                styles:
                  card:
                    - background-color: var(--ha-card-background)
                    - opacity: 1
                  name:
                    - color: var(--secondary-text-color)
                  icon:
                    - color: var(--secondary-text-color)
        heat:
          card:
            type: custom:button-card
            entity: climate.basement_thermostat
            triggers_update:
              - switch.basement_thermostat_basement_emergency_heat
            show_state: false
            show_name: true
            show_icon: true
            name: Heat
            icon: mdi:heat-pump
            tap_action:
              action: perform-action
              perform_action: climate.set_hvac_mode
              data:
                hvac_mode: heat
              target:
                entity_id: climate.basement_thermostat
            styles:
              card:
                - height: 125px
                - width: 165px
                - border-radius: 20px
                - background-color: |
                    [[[
                      const climate = states['climate.basement_thermostat'];
                      const emergencyHeat = states['switch.basement_thermostat_basement_emergency_heat'];
                      const isEmergencyOn = emergencyHeat && emergencyHeat.state === 'on';
                      const isHeat = climate && climate.state === 'heat';
                      
                      if (isHeat && !isEmergencyOn) {
                        return 'var(--ha-card-background)';
                      }
                      return 'var(--background-color)';
                    ]]]
              icon:
                - width: 68px
                - height: 68px
                - color: |
                    [[[
                      const climate = states['climate.basement_thermostat'];
                      const emergencyHeat = states['switch.basement_thermostat_basement_emergency_heat'];
                      const isEmergencyOn = emergencyHeat && emergencyHeat.state === 'on';
                      const isHeat = climate && climate.state === 'heat';
                      
                      if (isHeat && !isEmergencyOn) {
                        return 'var(--secondary-text-color)';
                      }
                      return 'var(--primary-text-color)';
                    ]]]
              name:
                - font-size: 28px
                - font-weight: bold
                - color: |
                    [[[
                      const climate = states['climate.basement_thermostat'];
                      const emergencyHeat = states['switch.basement_thermostat_basement_emergency_heat'];
                      const isEmergencyOn = emergencyHeat && emergencyHeat.state === 'on';
                      const isHeat = climate && climate.state === 'heat';
                      
                      if (isHeat && !isEmergencyOn) {
                        return 'var(--secondary-text-color)';
                      }
                      return 'var(--primary-text-color)';
                    ]]]
        emergency_heat:
          card:
            type: custom:button-card
            entity: switch.basement_thermostat_basement_emergency_heat
            show_state: false
            show_name: true
            show_icon: true
            name: Aux Heat
            icon: mdi:heat-wave
            tap_action:
              action: toggle
            styles:
              card:
                - height: 125px
                - width: 171px
                - border-radius: 20px
                - background-color: var(--background-color)
              icon:
                - width: 68px
                - height: 68px
                - color: var(--primary-text-color)
              name:
                - font-size: 28px
                - font-weight: bold
                - color: var(--primary-text-color)
            state:
              - value: "on"
                styles:
                  card:
                    - background-color: var(--ha-card-background)
                    - opacity: 1
                  name:
                    - color: var(--secondary-text-color)
                  icon:
                    - color: var(--secondary-text-color)
    - type: custom:button-card
      show_name: false
      show_icon: false
      show_state: false
      styles:
        card:
          - height: 125px
          - width: 690px
          - padding-top: 0px
          - margin-top: 0px
          - margin-left: 15px
          - border-radius: 20px
          - background-color: "#626569"
        grid:
          - grid-template-areas: |
              "on circulate auto ventilation"
          - grid-template-columns: 171px 165px 165px 171px
          - grid-template-rows: 125px
          - column-gap: 6px
          - align-items: center
      custom_fields:
        "on":
          card:
            type: custom:button-card
            entity: climate.basement_thermostat
            show_state: false
            show_name: true
            show_icon: true
            name: "On"
            icon: mdi:fan
            tap_action:
              action: perform-action
              perform_action: climate.set_fan_mode
              data:
                fan_mode: 'on'
              target:
                entity_id: climate.basement_thermostat
            styles:
              card:
                - height: 125px
                - width: 171px
                - border-radius: 20px
                - background-color: var(--background-color)
              icon:
                - width: 68px
                - height: 68px
                - color: var(--primary-text-color)
              name:
                - font-size: 28px
                - font-weight: bold
                - color: var(--primary-text-color)
            state:
              - operator: template
                value: >
                  [[[ return states['climate.basement_thermostat'].attributes.fan_mode
                  == 'on'; ]]]
                styles:
                  card:
                    - background-color: var(--ha-card-background)
                    - opacity: 1
                  name:
                    - color: var(--secondary-text-color)
                  icon:
                    - color: var(--secondary-text-color)
        circulate:
          card:
            type: custom:button-card
            entity: climate.basement_thermostat
            show_state: false
            show_name: true
            show_icon: true
            name: Circulate
            icon: mdi:fan-clock
            tap_action:
              action: perform-action
              perform_action: climate.set_fan_mode
              data:
                fan_mode: diffuse
              target:
                entity_id: climate.basement_thermostat
            styles:
              card:
                - height: 125px
                - width: 165px
                - border-radius: 20px
                - background-color: var(--background-color)
              icon:
                - width: 68px
                - height: 68px
                - color: var(--primary-text-color)
              name:
                - font-size: 28px
                - font-weight: bold
                - color: var(--primary-text-color)
            state:
              - operator: template
                value: >
                  [[[ return states['climate.basement_thermostat'].attributes.fan_mode
                  == 'diffuse'; ]]]
                styles:
                  card:
                    - background-color: var(--ha-card-background)
                    - opacity: 1
                  name:
                    - color: var(--secondary-text-color)
                  icon:
                    - color: var(--secondary-text-color)
        auto:
          card:
            type: custom:button-card
            entity: climate.basement_thermostat
            show_state: false
            show_name: true
            show_icon: true
            name: Auto
            icon: mdi:fan-auto
            tap_action:
              action: perform-action
              perform_action: climate.set_fan_mode
              data:
                fan_mode: auto
              target:
                entity_id: climate.basement_thermostat
            styles:
              card:
                - height: 125px
                - width: 165px
                - border-radius: 20px
                - background-color: var(--background-color)
              icon:
                - width: 68px
                - height: 68px
                - color: var(--primary-text-color)
              name:
                - font-size: 28px
                - font-weight: bold
                - color: var(--primary-text-color)
            state:
              - operator: template
                value: >
                  [[[ return states['climate.basement_thermostat'].attributes.fan_mode
                  == 'auto'; ]]]
                styles:
                  card:
                    - background-color: var(--ha-card-background)
                    - opacity: 1
                  name:
                    - color: var(--secondary-text-color)
                  icon:
                    - color: var(--secondary-text-color)
        ventilation:
          card:
            type: custom:button-card
            entity: switch.utility_room_ventilation_damper
            show_state: false
            show_name: true
            show_icon: true
            name: Ventilation
            icon: mdi:tailwind
            tap_action:
              action: toggle
            styles:
              card:
                - height: 125px
                - width: 171px
                - border-radius: 20px
                - background-color: var(--background-color)
              icon:
                - width: 68px
                - height: 68px
                - color: var(--primary-text-color)
              name:
                - font-size: 28px
                - font-weight: bold
                - color: var(--primary-text-color)
            state:
              - value: "on"
                styles:
                  card:
                    - background-color: var(--ha-card-background)
                    - opacity: 1
                  name:
                    - color: var(--secondary-text-color)
                  icon:
                    - color: var(--secondary-text-color)

