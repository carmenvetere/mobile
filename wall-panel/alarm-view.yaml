title: Alarm
type: custom:grid-layout
cards:
  - type: custom:button-card
    styles:
      card:
        - border-radius: 0px
        - padding-bottom: 5px
        - padding-left: 0px
        - margin: '-4px'
        - padding-top: 0px
        - box-shadow: rgba(0,0,0,.35) 0px 5px 15px
        - height: 480px
        - width: 480px
      grid:
        - grid-template-areas: |
            "header"
            "main"
            "nav"
        - grid-template-columns: auto
        - grid-template-rows: 50px 380px 50px
        - align-items: start
        - column-gap: 2px
    custom_fields:
      header: !include header.yaml
      main:
        card:
          type: custom:button-card
          entity: alarm_control_panel.bayberry_alarm_v2
          show_name: false
          show_icon: false
          show_state: false
          styles:
            card:
              - height: 380px
              - width: 456px
              - padding: 12px
              - margin: 0px
              - border-radius: 0px
              - background-color: transparent
            grid:
              - grid-template-areas: |
                  "display"
                  "keypad"
                  "controls"
              - grid-template-columns: auto
              - grid-template-rows: 40px 180px 80px
              - row-gap: 10px
              - align-items: center
              - justify-items: center
          custom_fields:
            # Status Display
            status:
              card:
                type: custom:button-card
                entity: alarm_control_panel.bayberry_alarm_v2
                show_name: false
                show_icon: true
                show_state: true
                state_display: |
                  [[[
                    var state = states['alarm_control_panel.bayberry_alarm_v2'].state;
                    if (state === 'armed_away') return 'Armed';
                    if (state === 'armed_home') return 'Armed';
                    if (state === 'disarmed') return 'Disarmed';
                    if (state === 'pending') return 'Pending';
                    if (state === 'arming') return 'Arming';
                    if (state === 'triggered') return 'ALARM!';
                    return state.charAt(0).toUpperCase() + state.slice(1);
                  ]]]
                icon: |
                  [[[
                    var state = states['alarm_control_panel.bayberry_alarm_v2'].state;
                    if (state === 'disarmed') return 'mdi:shield-off';
                    if (state === 'armed_home') return 'mdi:shield-home';
                    if (state === 'armed_away') return 'mdi:shield-lock';
                    if (state === 'triggered') return 'mdi:shield-alert';
                    return 'mdi:shield';
                  ]]]
                icon_color: |
                  [[[
                    var state = states['alarm_control_panel.bayberry_alarm_v2'].state;
                    if (state === 'disarmed') return 'green';
                    if (state === 'armed_home') return 'orange';
                    if (state === 'armed_away') return 'red';
                    if (state === 'triggered') return 'red';
                    return 'mdi:shield';
                  ]]]  
                styles:
                  card:
                    - height: 60px
                    - width: 400px
                    - border-radius: 10px
                  icon:
                    - color: white
                    - size: 24px
                  state:
                    - color: white
                    - font-size: 18px
                    - font-weight: bold
            # Code Display
            display:
              card:
                type: custom:button-card
                show_name: false
                show_icon: false
                show_state: true
                entity: input_text.alarm_code_input
                styles:
                  card:
                    - height: 40px
                    - width: 200px
                    - border-radius: 8px
                    - background-color: '#333333'
                    - border: 2px solid '#666666'
                  state:
                    - color: white
                    - font-size: 24px
                    - font-weight: bold
                    - letter-spacing: 8px
                    
            # Number Keypad
            keypad:
              card:
                type: custom:button-card
                show_name: false
                show_icon: false
                show_state: false
                styles:
                  card:
                    - height: 180px
                    - width: 300px
                    - background-color: transparent
                    - border-radius: 0px
                  grid:
                    - grid-template-areas: |
                        "n1 n2 n3"
                        "n4 n5 n6"
                        "n7 n8 n9"
                        "clear n0 enter"
                    - grid-template-columns: 90px 90px 90px
                    - grid-template-rows: 40px 40px 40px 40px
                    - gap: 5px
                custom_fields:
                  n1:
                    card:
                      type: custom:button-card
                      show_name: false
                      show_icon: false
                      show_state: false
                      name: '1'
                      tap_action:
                        action: call-service
                        service: input_text.set_value
                        service_data:
                          entity_id: input_text.alarm_code_input
                      styles:
                        card:
                          - height: 40px
                          - width: 85px
                          - border-radius: 8px
                          - background-color: '#E0E0E0'
                          - border: 1px solid '#BDBDBD'
                        name:
                          - color: black
                          - font-size: 20px
                          - font-weight: bold
                  clear:
                    card:
                      type: custom:button-card
                      show_name: false
                      show_icon: true
                      show_state: false
                      icon: mdi:backspace
                      tap_action:
                        action: call-service
                        service: input_text.set_value
                        service_data:
                          entity_id: input_text.alarm_code_input
                      styles:
                        card:
                          - height: 40px
                          - width: 85px
                          - border-radius: 8px
                          - background-color: '#FFCDD2'
                          - border: 1px solid '#BDBDBD'
                        icon:
                          - color: '#D32F2F'
                          - size: 20px
                  enter:
                    card:
                      type: custom:button-card
                      show_name: false
                      show_icon: true
                      show_state: false
                      icon: mdi:check
                      tap_action:
                        action: call-service
                        service: script.alarm_code_entry
                        service_data:
                      styles:
                        card:
                          - height: 40px
                          - width: 85px
                          - border-radius: 8px
                          - background-color: '#C8E6C9'
                          - border: 1px solid '#BDBDBD'
                        icon:
                          - color: '#388E3C'
                          - size: 20px
                          
            # Three-way Mode Controls (similar to climate view)
            controls:
              card:
                type: custom:button-card
                show_name: false
                show_icon: false
                show_state: false
                styles:
                  card:
                    - height: 70px
                    - width: 450px
                    - padding: 0
                    - margin: 0px
                    - border-radius: 12px
                    - background-color: '#D7D9DF'
                  grid:
                    - grid-template-areas: |
                        "disarm home away"
                    - grid-template-columns: 150px 150px 150px
                    - grid-template-rows: 70px
                    - column-gap: 5px
                    - align-items: center
                custom_fields:
                  disarm:
                    card:
                      type: custom:button-card
                      entity: alarm_control_panel.bayberry_alarm_v2
                      show_state: false
                      show_name: true
                      show_icon: true
                      name: Disarm
                      icon: mdi:shield-off
                      size: 25%
                      tap_action:
                        action: call-service
                        service: alarm_control_panel.alarm_disarm
                        service_data:
                          entity_id: alarm_control_panel.bayberry_alarm_v2
                      styles:
                        card:
                          - height: 65px
                          - width: 150px
                          - border-radius: 12px
                          - background-color: '#D7D9DF'
                        name:
                          - font-size: 12px
                          - font-weight: bold
                          - color: black
                        state:                
                          - value: 'DISARMED'
                            styles:
                              card:
                                - background-color: '#F44336'
                              name:
                                - color: white
                              icon:
                                - color: white
                  home:
                    card:
                      type: custom:button-card
                      entity: alarm_control_panel.bayberry_alarm_v2
                      show_state: false
                      show_name: true
                      show_icon: true
                      name: Armed Home
                      icon: mdi:shield-home
                      size: 25%
                      tap_action:
                        action: call-service
                        service: alarm_control_panel.alarm_arm_home
                        service_data:
                          entity_id: alarm_control_panel.bayberry_alarm_v2
                      styles:
                        card:
                          - height: 65px
                          - width: 150px
                          - border-radius: 12px
                          - background-color: '#D7D9DF'
                        name:
                          - font-size: 12px
                          - font-weight: bold
                          - color: black
                        state:                
                          - value: 'ARMED_HOME'
                            styles:
                              card:
                                - background-color: '#F44336'
                              name:
                                - color: white
                              icon:
                                - color: white
                  away:
                    card:
                      type: custom:button-card
                      entity: alarm_control_panel.bayberry_alarm_v2
                      show_state: false
                      show_name: true
                      show_icon: true
                      name: Armed Away
                      icon: mdi:shield-lock
                      size: 25%
                      tap_action:
                        action: call-service
                        service: alarm_control_panel.alarm_arm_away
                        target:
                          entity_id: alarm_control_panel.bayberry_alarm_v2
                        data:
                      styles:
                        card:
                          - height: 65px
                          - width: 150px
                          - border-radius: 12px
                          - background-color: '#D7D9DF'
                        name:
                          - font-size: 12px
                          - font-weight: bold
                          - color: black
                        state:                
                          - value: 'ARMED_AWAY'
                            styles:
                              card:
                                - background-color: '#F44336'
                              name:
                                - color: white
                              icon:
                                - color: white
      nav: !include footer-menu.yaml